<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
    <title>Catálogo de Vehículos</title>
</h:head>

<h:body>
   <ui:composition template="layout/template.xhtml">
       <ui:define name="content">
           <div class="mt-4">
               <div>
                   <h2>Reportes del Administrador</h2>
                   <a class="btn btn-primary" href="vehicles.xhtml">Vehiculos</a>
               </div>

               <!-- Reporte de vehículos más solicitados -->
               <h3>Vehículos Más Solicitados</h3>
               <p:dataTable value="#{adminBean.mostRequestedVehicles}" var="vehiculo" styleClass="table">
                   <p:column headerText="Ranking">
                       <h:outputText value="#{vehiculo.id}" />
                   </p:column>
                   <p:column headerText="Marca">
                       <h:outputText value="#{vehiculo.brand}" />
                   </p:column>
                   <p:column headerText="Modelo">
                       <h:outputText value="#{vehiculo.model}" />
                   </p:column>
                   <p:column headerText="Total Solicitudes">
                       <h:outputText value="#{vehiculo.totalCount}" />
                   </p:column>
               </p:dataTable>

               <h3>Lista de Vehículos Más Solicitados</h3>
               <p:dataTable value="#{adminBean.mostRequestedVehicles}" var="vehiculo" styleClass="table">
                   <p:column headerText="Marca">
                       <h:outputText value="#{vehiculo.brand}" />
                   </p:column>
                   <p:column headerText="Modelo">
                       <h:outputText value="#{vehiculo.model}" />
                   </p:column>
                   <p:column headerText="Total Solicitudes">
                       <h:outputText value="#{vehiculo.totalCount}" />
                   </p:column>
               </p:dataTable>

               <!-- Reporte de Cotizaciones -->
               <h3>Cotizaciones Realizadas</h3>
               <p:dataTable value="#{adminBean.cotizaciones}" var="cotizacion" styleClass="table">
                   <p:column headerText="Cliente">
                       <h:outputText value="#{cotizacion.customer.name} #{cotizacion.customer.lastName}" />
                   </p:column>
                   <p:column headerText="Vehículo">
                       <h:outputText value="#{cotizacion.vehicle.brand} #{cotizacion.vehicle.model}" />
                   </p:column>
                   <p:column headerText="Fecha">
                       <h:outputText value="#{cotizacion.date}" />
                   </p:column>
               </p:dataTable>

               <!-- Reporte de Citas -->
               <h3>Citas Programadas</h3>
               <p:dataTable value="#{adminBean.citas}" var="cita" styleClass="table">
                   <p:column headerText="Cliente">
                       <h:outputText value="#{cita.customer.name} #{cita.customer.lastName}" />
                   </p:column>
                   <p:column headerText="Vehículo">
                       <h:outputText value="#{cita.vehicle.brand} #{cita.vehicle.model}" />
                   </p:column>
                   <p:column headerText="Motivo">
                       <h:outputText value="#{cita.reason}" />
                   </p:column>
                   <p:column headerText="Fecha">
                       <h:outputText value="#{cita.date}" />
                   </p:column>
               </p:dataTable>

           </div>
       </ui:define>
   </ui:composition>
</h:body>
</html>